    Qt-NList Version 0.47a ドキュメント     2007/03/04

*** 1. 概要 ***
  Qt-Nlist は、回路図エディタQt-BSch Ver 0.2以降/Qt-BSch3Vのためのネット
リスト/部品リスト作成ソフトです。
  Qt-BSch Ver 0.2以降で作成した回路図ファイルを、1つまたはそれ以上指定して、
それらをまとめた状態のネットリストと部品リストを作成できます。


*** 2. 開発環境 ***
次の環境で動作確認を行いました。

 Windows XP + Qt 4.1.2


コンパイルは Qt 4.1.2 が使える環境下で次の手順で行います。
$cd qtnlist
$qmake
$make
これで、実行ファイル qtnlist が得られます。
プロジェクトファイルの qtnlist.pro は同梱しているものをお使いください。



*** 3. 使い方 ***
  入力ファイルとモードを指定して、実行ボタンを押します。
  複数のファイルを同時に指定すると、それら全体でひとつの回路図として扱いま
す。


*** 4. Netlistモードのルール ***
  添付している nlfigs.png も併せてごらんください。

(1)コメント・破線は回路図を構成する要素ではないので無視します

(2)バス線、バスエントリー、ワイヤーエントリーは無視します
  バスエントリーはバス線の相互接続、ワイヤーエントリーはバス線からワイヤーを
引き出すときに使いますが、Qt-Nlistではこれらのバス線に関わる図面要素を無視しま
す。
  通常はバス線にワイヤーを接続する場合は、そのワイヤーがバス内のどの線に接続
しているのかを指定するためにラベルを付けます。Qt-Nlist はこのラベル情報だけをも
とにバス線に接続されたワイヤーのネット情報を作成します。そのため図3-2-1左のよ
うな図面では問題が生じます。
  図3-2-1左のような回路図は Qt-Nlist 内部では右のように扱います。
  本当なら U1.18はU2.2とだけつながっているのですが、ネットリスト出力ではU3.18、
U4.2とも接続してしまいます。
  この問題を避けるためには、図3-2-2のようにラベル名を分けて作図してください。

(3)タグはワイヤーと部品のピンに信号名をつける
  Qt-Nlistではタグ、ラベル、電源シンボルによりピンやワイヤーに信号名をつけ、
同じ信号名のピンやワイヤーを接続しているものとみなします。タグの形状に関わら
ず両端（または片端）に接続されているワイヤーにタグ文字列で信号名をつけます。
  例えば 図3-3-1の上図の場合、左右のワイヤーに[A15]という名前をつけます。同様
にワイヤーを介さずに直接タグに部品のピンがついている場合でもピンに信号名をつ
けます。(図3-3-1の下図の場合、R1の左のピンに[INPUT1]という名前をつけます)
  図面の見映えを良くするために、タグの横幅を揃える目的でタグ文字列の前後にス
ペースをつけることがあります。
  Qt-Nlist では、タグやラベルの前後のスペースは無視します。そのため、図3-3-2の
左上のタグのように[AB]の代わりに[   AB    ]と書いた場合でも[AB]のタグがついた
線、またはピンと結線します。

(4)電源シンボルはワイヤーと部品のピンに信号名をつける
  部品番号がなく、ピンの数が1本の部品を電源シンボルとみなします。
  GNDやVCCのシンボルを配置するときに「GND」や「VCC」のようなテキストをつける
場合は、アトリビュートのReferenceではなく、Nameに記入するようにしてください。
  電源シンボルに接続されたワイヤーと部品のピンには次のルールに従って信号名が
つけられます。

 a.電源シンボルの "値または名前" が空白の場合 (図3-4-1 左の上下)はライブラリ
   からの呼び出し名を信号名として使う
 b.電源シンボルの "値または名前" が存在する場合(図3-4-1 中央と右の上下)は、
   この "値または名前"を信号名として使う
 c.電源シンボルに "番号" がついていても無視する。

(5)ラベルはワイヤーにだけ信号名をつける
  ラベルはワイヤーに次のルールで信号名をつけます。
a.縦ラベルはラベルの原点を通る垂直の線にだけ信号名をつける
b.横ラベルはラベルの原点を通る水平の線にだけ信号名をつける
  図面を見るだけではラベルの原点がワイヤーの上にあるかどうかはわからないの
ですが、グリッドへのスナップを有効にして配置しているのなら原点はグリッドに
乗っています。ラベル配置に限らず、特に支障が無い限り回路に関わる図面要素は
グリッドにスナップさせる状態で配置してください。
  (ラベルの原点の位置は 図3-5-1)

(6)ワイヤーの重なりはつながったものとみなす(図3-6-1)
  水平同士、垂直同士のワイヤーは1本のワイヤーに最適化されます。

  !!! 注意 !!!
  斜めのワイヤーに対してはこの最適化は行われません。また、ワイヤーとピンが
重なっている場合も、ピン同士が重なっている場合も最適化は行いません。ワイヤ
ーとピン、ピンとピンの接続は必ず端点で行ってください。

(7)斜めのワイヤーの上のジャンクションは正しく認識しないことがある

(8)信号名NOCONNECTIONをリストに含めないようにできる
  意図的にオープンにする端子に、NOCONNECTION部品を配置しておく場合は、
Eliminate signal NOCONNECTION をチェックしておいてください。


*** 5. Partslistモードの動作 ***

  部品リストは、表計算ソフトなどで読み込めるCSVファイルで出力します。


    カラム      1              2              3           4       5
  --------------------------------------------------------------------
    内容    ステータス   プリフィックス   サフィックス   名前   ノート


・ステータス
  部品番号が同じ部品が見つかると、間違って部品番号が振られた可能性があると
判断して、ユーザーにチェックを促するようにステータスに印を付けます。
    (a) 部品番号が同じ  で  部品名が同じ      ステータスに「*」
    (b) 部品番号が同じ  で  部品名が異なる    ステータスに「?」
  標準ロジックの 7400 などのように１つの部品に複数のブロックを含むものの場
合、(a)のケースはごく当たり前に生じますが、(b)はあまり無いでしょう。
  ステータスに「*」や「?」が付いた場合は図面を確認し、正しいものかどうかを
確認してみてください。

・プリフィックス、サフィックス
  部品番号を前のアルファベットの部分と数字の部分にわけて出力します。

・名前
  部品名

・ノート
  ノートが改行が含まれる場合は、これを空白に置き換えます。



*** 6. ライセンスについて ***

本プログラムはフリー・ソフトウェアです。あなたは、Free Software Foundation
が公表した GNU 一般公有使用許諾の「バージョン 2」或いは それ以降の各バージョ
ンの中からいずれかを選択し、そのバージョンが 定める条項に従って本プログラムを
再頒布または変更することができます。

本プログラムは有用とは思いますが、頒布にあたっては、市場性及び 特定目的適合性
についての暗黙の保証を含めて、いかなる保証も行ないません。詳細については GNU
一般公有使用許諾書をお読みください。

あなたは、本プログラムと一緒に GNU 一般公有使用許諾の写しを 受け取っているはず
です。そうでない場合は、Free Software Foundation, Inc., 59 Temple Place,
Suite 330, Boston, MA 0211-1307, USA へ手紙を書いてください。


-----------------------------------------------------------------------------
  岡田 仁史
  URL    : http://www.suigyodo.com/online
  E-Mail : hitoshi@suigyodo.com

